angular.module("ualib.staffdir.templates",["staff-card/staff-card-list.tpl.html","staff-card/staff-card-md.tpl.html","staff-directory/staff-directory-facets.tpl.html","staff-directory/staff-directory-listing.tpl.html","staff-directory/staff-directory.tpl.html","staff-profile/staff-profile.tpl.html"]),angular.module("staff-card/staff-card-list.tpl.html",[]).run(["$templateCache",function(a){a.put("staff-card/staff-card-list.tpl.html",'<div ng-repeat="person in filteredList | after:(staffdir.pager.page-1)*staffdir.pager.perPage | limitTo:staffdir.pager.perPage"><div class=page-slice><div class=row><div class="hidden-xs col-sm-3"><img class="staff-portrait thumbnail" ng-if=person.photo ng-src={{person.photo}} alt=""> <img class="staff-portrait thumbnail" ng-if=!person.photo ng-src=https://www.lib.ua.edu/wp-content/themes/roots-ualib/assets/img/user-profile.png alt=""></div><div class="col-xs-12 col-sm-7"><div class=row><div class="col-xs-12 col-sm-7 name-plate"><h3 class=name><small ng-if=person.rank>{{person.rank}}</small> <a ng-href=#/staffdir/{{person.emailPrefix}} ng-if=person.profile><span ng-class="{\'sorting-by\': staffdir.facet.sortBy == \'firstname\'}" ng-bind-html="person.firstname | highlight:staffdir.facet.search"></span> <span ng-class="{\'sorting-by\': staffdir.facet.sortBy == \'lastname\'}" ng-bind-html="person.lastname | highlight:staffdir.facet.search"></span> </a><span ng-if=!person.profile><span ng-class="{\'sorting-by\': staffdir.facet.sortBy == \'firstname\'}" ng-bind-html="person.firstname | highlight:staffdir.facet.search"></span> <span ng-class="{\'sorting-by\': staffdir.facet.sortBy == \'lastname\'}" ng-bind-html="person.lastname | highlight:staffdir.facet.search"></span></span></h3><h4 class=title><span ng-bind-html="person.title | highlight:staffdir.facet.search"></span></h4><h5 class=hidden-xs><span ng-bind-html="person.department | highlight:staffdir.facet.search"></span></h5></div><div class="col-xs-12 col-sm-5"><ul class=fa-ul><li ng-if=person.phone><span class="fa fa-phone fa-li"></span><a ng-href=tel:+1{{person.phone}}>{{person.phone}}</a></li><li class=hidden-xs ng-if=person.fax><span class="fa fa-fax fa-li"></span>{{person.fax}}</li><li ng-if=person.email><span class="fa fa-envelope fa-li"></span><a ng-href=mailto:{{person.email}} title="Email {{person.firstname}} {{person.lastname}}">{{person.email}}</a></li></ul></div><div class="col-sm-12 subject-specialty hidden-xs" ng-if=person.subjects><table class="table table-condensed"><thead><tr><th>Liaison</th></tr></thead><tbody><tr ng-repeat="subject in person.subjects | orderBy:\'subject\'"><td><a ng-href={{subject.link}} title={{subject.subject}} ng-if=subject.link ng-bind-html="subject.subject | highlight:staffdir.facet.search"></a> <span ng-if=!subject.link ng-bind-html="subject.subject | highlight:staffdir.facet.search">{{subject.subject}}</span></td></tr></tbody></table></div></div></div></div></div></div><div class="alert alert-warning text-center" role=alert ng-if="filteredList.length < 1"><h2>No staff members found <span ng-if=staffdir.facet.library>in {{staffdir.facet.library}}</span> <span ng-if=staffdir.facet.liaison>that are liaisons</span> <span ng-if=staffdir.facet.subject><span ng-if=staffdir.facet.liaison>for</span> <span ng-if=!staffdir.facet.liaison>with a specialty in</span> {{staffdir.facet.subject}}</span></h2></div>')}]),angular.module("staff-card/staff-card-md.tpl.html",[]).run(["$templateCache",function(a){a.put("staff-card/staff-card-md.tpl.html",'<div class="staff-card-container panel panel-default"><div class=panel-body><div class=row><div class="name-plate col-sm-12 text-right"><h4 class=name><small ng-if=staffPerson.rank>{{staffPerson.rank}} </small>{{staffPerson.firstname}} {{staffPerson.lastname}}</h4><div class=title>{{staffPerson.title}}</div><div>{{staffPerson.department}}</div></div></div><div class=row><div class=col-xs-6><div class=staff-card-detail><h6>Contact</h6><ul class=fa-ul><li ng-if=staffPerson.phone><span class="fa fa-phone fa-li"></span><a ng-href=tel:+1-{{staffPerson.phone}}>{{staffPerson.phone}}</a></li><li ng-if=staffPerson.fax><span class="fa fa-fax fa-li"></span>{{staffPerson.fax}}</li><li ng-if=staffPerson.email><span class="fa fa-envelope fa-li"></span><a href=mailto:{{staffPerson.email}}>{{staffPerson.email}}</a></li></ul></div></div><div class=col-xs-6><div class=staff-card-detail ng-if=staffPerson.subjects><h6>Subject Expertise</h6><ul class=list-unstyled><li role=presentation ng-repeat="subject in staffPerson.subjects | orderBy:subject.subject" ng-class="{\'disabled\': !subject.link}"><a ng-href={{subject.link}} title={{subject.subject}} ng-if=subject.link>{{subject.subject}}</a> <span title={{subject.subject}} ng-if=!subject.link>{{subject.subject}}</span></li></ul></div></div></div></div></div>')}]),angular.module("staff-directory/staff-directory-facets.tpl.html",[]).run(["$templateCache",function(a){a.put("staff-directory/staff-directory-facets.tpl.html",'<form class=facets-form><div class=form-group><h2 class=h4>Filters</h2></div><div class=form-group><div class=facet-group><h3 id=searchStaffDirectory class=h5>Search staff directory</h3><input class=form-control id=directorySearch aria-labelledby=searchStaffDirectory name=directorySearch ng-model=staffdir.facet.search placeholder="Keyword Search..." ng-keyup="staffdir.changeFacet(\'search\')"></div></div><div class=form-group><h3 class=h5>Sort by</h3><div class=facet-group><div class="btn-group btn-group-justified"><button class="btn btn-default" ng-model=staffdir.facet.sortBy btn-radio="\'lastname\'" ng-change="staffdir.changeFacet(\'sortBy\')">Last name</button> <button class="btn btn-default" ng-model=staffdir.facet.sortBy btn-radio="\'firstname\'" ng-change="staffdir.changeFacet(\'sortBy\')">First name</button></div></div></div><div class="form-group hidden-xs hidden-sm"><h3 class=h5>Liaison area</h3><div class=facet-group><select class=form-control ng-model=staffdir.facet.subject name=subject ng-options="subject for subject in facets.subjects" ng-change="staffdir.changeFacet(\'subject\')"><option value="">-- Select Subject --</option></select><label class=checkbox-inline><input type=checkbox ng-true-value=1 ng-model=staffdir.facet.liaison ng-change="staffdir.changeFacet(\'liaison\')">Limit to liaisons</label></div></div><div class="form-group hidden-xs hidden-sm"><h3 class=h5>Department</h3><div class=facet-group><select class=form-control ng-model=staffdir.facet.department name=department ng-options="department for department in facets.departments" ng-change="staffdir.changeFacet(\'department\')"><option value="">-- Select Department --</option></select></div></div><div class="form-group hidden-xs hidden-sm"><h3 class=h5>Library Location</h3><div class=facet-group><div class=radio><label><input type=radio ng-model=staffdir.facet.library ng-checked=!staffdir.facet.library ng-change="staffdir.changeFacet(\'library\')"> All</label></div><div class=radio ng-repeat="library in facets.libraries"><label><input type=radio ng-model=staffdir.facet.library value={{library}} ng-change="staffdir.changeFacet(\'library\')"> {{library}}</label></div></div></div><div class="form-group hidden-xs hidden-sm"><button class="btn btn-primary btn-primary-dark btn-block" type=button ng-click=staffdir.clearFacets()><span class="fa fa-fw fa-refresh"></span> Reset Filters</button></div></form>')}]),angular.module("staff-directory/staff-directory-listing.tpl.html",[]).run(["$templateCache",function(a){a.put("staff-directory/staff-directory-listing.tpl.html",'<div class=table-responsive><table class="table table-striped table-condensed table-hover"><thead><tr><th><a href=# ng-click="sortList($event, \'lastname\')" ng-class="{\'sortable\': !staffdir.sortReverse && staffdir.facet.sortBy == \'lastname\', \'sortable-reverse\': staffdir.sortReverse && staffdir.facet.sortBy == \'lastname\'}">Name</a></th><th class=hidden-xs><a href=# ng-click="sortList($event, \'title\')" ng-class="{\'sortable\': !staffdir.sortReverse && staffdir.facet.sortBy == \'title\', \'sortable-reverse\': staffdir.sortReverse && staffdir.facet.sortBy == \'title\'}">Title</a></th><th class=hidden-xs><a href=# ng-click="sortList($event, \'department\')" ng-class="{\'sortable\': !staffdir.sortReverse && staffdir.facet.sortBy == \'department\', \'sortable-reverse\': staffdir.sortReverse && staffdir.sortBy == \'department\'}">Department/Unit</a></th><th>Contact</th><th class="hidden-xs hidden-sm">Specialty</th></tr></thead><tbody><tr ng-repeat="person in filteredList = (list | filter:staffdir.facet.search | filter:staffdir.facet.subject:true | orderBy:staffdir.sortBy:staffdir.sortReverse) track by $index"><td class=text-nowrap><div ng-if=person.rank class=text-muted>{{person.rank}}</div><span ng-bind-html="person.firstname | highlight:staffdir.facet.search"></span> <strong ng-bind-html="person.lastname | highlight:staffdir.facet.search"></strong></td><td class=hidden-xs><span ng-bind-html="person.title | highlight:staffdir.facet.search"></span></td><td class=hidden-xs><span ng-bind-html="person.department | highlight:staffdir.facet.search"></span></td><td><ul class=fa-ul><li ng-if=person.phone><span class="fa fa-phone fa-li"></span>{{person.phone}}</li><li ng-if=person.fax><span class="fa fa-fax fa-li"></span>{{person.fax}}</li><li ng-if=person.email><span class="fa fa-envelope fa-li"></span> <a ng-href=mailto:{{person.email}} title="Email {{person.firstname}} {{persone.lastname}}">{{person.email}}</a></li></ul></td><td class="hidden-xs hidden-sm"><ul class=list-unstyled ng-if=person.subjects><li ng-repeat="subject in person.subjects | orderBy:subject.subject"><a ng-href={{subject.link}} title={{subject.subject}} ng-if=subject.link ng-bind-html="subject.subject | highlight:staffdir.facet.search"></a> <span ng-if=!subject.link ng-bind-html="subject.subject | highlight:staffdir.facet.search">{{subject.subject}}</span></li></ul></td></tr></tbody></table><div class="alert alert-warning text-center" role=alert ng-show="filteredList.length === 0"><h2>No results<span ng-if=staffdir.facet.subject><strong> for {{staffdir.facet.subject}}</strong> subject specialists</span> <span ng-if=staffdir.facet.search>matching <strong>"{{staffdir.facet.search}}"</strong></span></h2></div></div>')}]),angular.module("staff-directory/staff-directory.tpl.html",[]).run(["$templateCache",function(a){a.put("staff-directory/staff-directory.tpl.html",'<div class=jumbotron-header><div class=jumbotron><div class=container><div class=row><div class=col-sm-12><ol class=breadcrumb typeof=BreadcrumbList vocab=http://schema.org/ ><li><a title="Go to The University of Alabama Libraries." href=/#/home class=home>The University of Alabama Libraries</a></li><li><a title="Go to News." href=/#/staffdir class="post post-page">Staff Directory</a></li></ol></div></div><div class=row><div class=col-md-12><h1>Staff Directory</h1></div></div></div></div></div><div class=container><div class="row staff-directory"><div class="col-md-3 col-md-push-9"><div class=staff-directory-facets facets=staffdir.facets></div></div><div class="col-md-9 col-md-pull-3"><div ng-show=facets.showFacetBar><ol class="breadcrumb facetcrumb"><li ng-if=facets.facet.department><strong>Department:</strong> <button type=button class="btn btn-default" ng-click="facets.clearFacets(\'department\')">{{facets.facet.department | truncate : 20 : \'...\'}} <span class=text-muted aria-hidden=true>&times;</span></button></li><li ng-if=facets.facet.library><strong>Library:</strong> <button type=button class="btn btn-default" ng-click="facets.clearFacets(\'library\')">{{facets.facet.library}} <span class=text-muted aria-hidden=true>&times;</span></button></li><li ng-if=facets.facet.subject><strong>Liaison area:</strong> <button type=button class="btn btn-default" ng-click="facets.clearFacets(\'subject\')">{{facets.facet.subject}} <span class=text-muted aria-hidden=true>&times;</span></button></li><li ng-if=facets.facet.liaison><button type=button class="btn btn-default" ng-click="facets.clearFacets(\'liaison\')">Liaison <span class=text-muted aria-hidden=true>&times;</span></button></li><li class=pull-right><button type=button class="btn btn-primary btn-small reset-btn" title="Reset filters" ng-click=facets.clearFacets()><i class="fa fa-refresh"></i></button></li></ol></div><div class=text-center><pagination class=pagination-sm ng-model=facets.pager.page total-items=facets.pager.totalItems max-size=facets.pager.maxSize boundary-links=true rotate=false items-per-page=facets.pager.perPage ng-change="facets.changeFacet(\'page\')" ng-if="facets.pager.totalItems > facets.pager.perPage"></pagination></div><div class=staff-directory-listing id=staff-directory-listing list=staffdir.list sort-by=lastname></div><div class=text-center><pagination class=pagination-sm ng-model=facets.pager.page total-items=facets.pager.totalItems max-size=facets.pager.maxSize boundary-links=true rotate=false items-per-page=facets.pager.perPage ng-change="facets.changeFacet(\'page\')" ng-if="facets.pager.totalItems > facets.pager.perPage"></pagination></div></div></div></div>')}]),angular.module("staff-profile/staff-profile.tpl.html",[]).run(["$templateCache",function(a){a.put("staff-profile/staff-profile.tpl.html",'<div class=container><ol class=breadcrumb typeof=BreadcrumbList vocab=http://schema.org/ ><li><a title="Go to The University of Alabama Libraries." href=/#/home class=home>The University of Alabama Libraries</a></li><li><a title="Go to the Staff Directory." href=/#/staffdir class=home>Staff Directory</a></li><li><a title="Go to user profile." href="" class=home>{{userProfile.person.firstname}} {{userProfile.person.lastname}}</a></li></ol><div class=page-header><h2>Faculty/Staff Profile</h2></div><div class="row staff-profile"><div class="hidden-xs col-md-3"><img class="staff-portrait thumbnail" ng-src={{userProfile.person.photo}} ng-if=userProfile.person.photo alt=""> <img class="staff-portrait thumbnail" ng-src=https://www.lib.ua.edu/wp-content/themes/roots-ualib/assets/img/user-profile.png ng-if=!userProfile.person.photo alt=""></div><div class=col-md-9><div class=name-plate><h1 class=name><small ng-if=userProfile.person.rank>{{userProfile.person.rank}}</small> <span ng-bind-html=userProfile.person.firstname></span> <span ng-bind-html=userProfile.person.lastname></span></h1><h2 class=title><span ng-bind-html=userProfile.person.title></span></h2><h3 class=hidden-xs><span ng-bind-html=userProfile.person.department></span></h3></div><div class=row><div class=page-slice><div class=col-md-6><ul class=fa-ul><li ng-if=userProfile.person.phone><span class="fa fa-phone fa-li"></span><a ng-href=tel:+1-{{userProfile.person.phone}}>{{userProfile.person.phone}}</a></li><li class=hidden-xs ng-if=userProfile.person.fax><span class="fa fa-fax fa-li"></span>{{userProfile.person.fax}}</li><li ng-if=userProfile.person.email><span class="fa fa-envelope fa-li"></span> <a href=mailto:{{userProfile.person.email}}>{{userProfile.person.email}}</a></li><li ng-if="userProfile.person.website.length > 11"><span class="fa fa-external-link-square fa-li"></span> <a ng-href={{userProfile.person.website}} class=external-link>Personal website</a></li></ul></div><div class=col-md-6><ul class=fa-ul><li ng-if="userProfile.person.resume.length > 11"><span class="fa fa-file-text fa-li"></span> <a ng-href={{userProfile.person.resume}}>Resume / CV</a></li><li ng-if=userProfile.person.social1><span class={{userProfile.person.snClass1}}></span> <a ng-href={{userProfile.person.social1}} class=external-link>{{userProfile.person.snTitle1}}</a></li><li ng-if=userProfile.person.social2><span class={{userProfile.person.snClass2}}></span> <a ng-href={{userProfile.person.social2}} class=external-link>{{userProfile.person.snTitle2}}</a></li><li ng-if=userProfile.person.social3><span class={{userProfile.person.snClass3}}></span> <a ng-href={{userProfile.person.social3}} class=external-link>{{userProfile.person.snTitle3}}</a></li></ul></div></div></div></div></div><div class=row><div class=col-md-12><span ng-bind-html=userProfile.person.profile></span></div></div></div>')}]),angular.module("ualib.staffdir",["ngRoute","ngResource","ngAnimate","ngSanitize","angular.filter","ui.bootstrap","ualib.ui","ualib.staffdir.templates"]),angular.module("staffdir",["ualib.staffdir"]),angular.module("ualib.staffdir").service("StaffDirectoryService",["$location","$rootScope",function(a,b){function c(a){var b;for(b in a)if(a[b]&&!d.facetExceptions.hasOwnProperty(b))return!1;return!0}var d=this;this.sortReverse=!1,this.sortable={},this.facet={},this.facetExceptions={sortBy:"lastname",search:"",page:1},this.pager={page:1,perPage:20,maxSize:10,totalItems:0},this.showFacetBar=!1,this.init=function(){var b=a.search();for(var c in b)this.showFacetBar||this.facetExceptions.hasOwnProperty(c)||(this.showFacetBar=!0),this.facet[c]=b[c]},this.clearFacets=function(){var e=arguments.length?arguments:Object.keys(d.facet),f=Array.prototype.concat.apply(Array.prototype,e),g={},h={};Object.keys(d.facet).map(function(b){d.facetExceptions.hasOwnProperty(b)?(h[b]=d.facetExceptions[b],a.search(b,null)):-1===f.indexOf(b)?(h[b]=d.facet[b],g[b]=d.facet[b]):a.search(b,null)}),d.showFacetBar=!c(g),d.facet=angular.copy(h),b.$broadcast("facetsChange")},this.changeFacet=function(e){var f=d.facet.hasOwnProperty(e)&&""!==d.facet[e]&&!1!==d.facet[e]?d.facet[e]:null;a.search(e,f),a.replace(),d.showFacetBar=!c(d.facet),b.$broadcast("facetsChange",e)},this.specialtyType=function(a){var b=d.facet.liaison;return!b||(b=3,a.subjects.filter(function(a){var c=(a.type&b)===b;return 3===b?(console.log(d.facet.subject),d.facet.subject?d.facet.subject===a.subject&&a.type>0:a.type>0):d.facet.subject?d.facet.subject===a.subject&&c:c}).length>0)}}]),angular.module("ualib.staffdir").factory("StaffFactory",["$resource","$filter","$http",function(a,b,c){function d(a,b){return a=angular.isArray(a)?a:[a],a.concat(b)}return{directory:function(){return a("//wwwdev2.lib.ua.edu/staffDir/api/people",{},{get:{cache:!0,method:"GET",transformResponse:d(c.defaults.transformResponse,function(a){var c=["division","prefix","website","resume","social1","social2","social3"],d=angular.fromJson(a),e={list:[],facets:{}},f=[],g=[];return angular.forEach(d.list,function(a){var b={};for(var d in a)a.hasOwnProperty(d)&&-1===c.indexOf(d)&&(b[d]=a[d]);a=b,a.photo=a.photo||"",a.profile&&(a.profile=!0);var e=/^([\w-]+(?:\.[\w-]+)*)/,h=a.email.match(e);null!==h&&(a.emailPrefix=h[0]),g.push(a),angular.isDefined(a.subjects)&&a.subjects.length>0&&angular.forEach(a.subjects,function(a){f.push(a)})}),f=b("unique")(f,"subject"),f=b("orderBy")(f,"subject"),e.facets.subjects=f.map(function(a){return a.subject}),e.facets.libraries=d.libraries.map(function(a){return a.name}),e.facets.departments=d.departments.map(function(a){return a.name}),e.list=g,e})}})},byEmail:function(){return a("//wwwdev2.lib.ua.edu/staffDir/api/people/search/email/:email",{},{cache:!0})},byName:function(){return a("//wwwdev2.lib.ua.edu/staffDir/api/people/search/firstname/:firstname/lastname/:lastname",{},{cache:!0})},byId:function(){return a("//wwwdev2.lib.ua.edu/staffDir/api/people/search/id/:id",{},{cache:!0})},profile:function(){return a("//wwwdev2.lib.ua.edu/staffDir/api/profile/:login",{},{cache:!0})}}}]),angular.module("ualib.staffdir").config(["$routeProvider",function(a){a.when("/staffdir/cardlist",{template:'<div class="staff-card-list"></div>'})}]).directive("staffCardList",["StaffFactory",function(a){return{restrict:"AC",templateUrl:"staff-card/staff-card-list.tpl.html",controller:["$scope",function(b){b.staffdir={},a.directory().get().$promise.then(function(a){b.staffdir=a.list},function(){console.log("Staffdir Error -- Come on, put in proper error handling already")})}]}}]).directive("staffCard",["StaffFactory",function(a){return{restrict:"EA",scope:{person:"@",size:"@"},templateUrl:function(a,b){var c="staff-card/";switch(b.size){case"sm":c+="staff-card-sm.tpl.html";break;default:c+="staff-card-md.tpl.html"}return c},link:function(b,c){if(angular.isDefined(b.person))if(b.info={},angular.isNumber(b.person))a.byId().get({id:b.person}).$promise.then(function(a){b.staffPerson=a.list[0]},function(){console.log("Staffdir Error -- Come on, put in proper error handling already")});else{var d=b.person.split(/\s/);d.length>1?a.byName().get({firstname:d[0],lastname:d[1]}).$promise.then(function(a){b.staffPerson=a.list[0]},function(){console.log("Staffdir Error -- Come on, put in proper error handling already")}):a.byEmail().get({email:d[0]}).$promise.then(function(a){b.staffPerson=a.list[0]},function(){console.log("Staffdir Error -- Come on, put in proper error handling already")})}}}}]),angular.module("ualib.staffdir").config(["$routeProvider",function(a){a.when("/staffdir",{reloadOnSearch:!1,controller:"StaffDirCtrl",templateUrl:"staff-directory/staff-directory.tpl.html",resolve:{StaffDir:["StaffFactory",function(a){return a.directory().get().$promise.then(function(a){return a},function(a,b){return console.log("Error"+b+": "+a),staff})}]}})}]).controller("StaffDirCtrl",["$scope","StaffDir","StaffDirectoryService",function(a,b,c){a.staffdir=b,a.facets=c,c.pager.totalItems=b.list.length}]).directive("staffDirectoryListing",["StaffDirectoryService","$document","$filter",function(a,b,c){return{restrict:"AC",scope:{list:"=",sortBy:"@"},templateUrl:"staff-card/staff-card-list.tpl.html",controller:["$scope",function(d){function e(b){a.pager.totalItems=b;var c=Math.floor(a.pager.totalItems/a.pager.maxSize);c<a.pager.page&&(a.pager.page=c||1),a.pager.firstItem=(a.pager.page-1)*a.pager.perPage+1,a.pager.lastItem=Math.min(a.pager.totalItems,a.pager.page*a.pager.perPage)}function f(){d.filteredList=g(d.list),e(d.filteredList.length),b.duScrollTo(0,30,500,function(a){return--a*a*a+1})}function g(b){for(var d in a.facet)switch(d){case"department":case"library":b=c("filterBy")(b,[d],a.facet[d]);break;case"selector":case"instructor":case"liaison":b=c("filter")(b,a.specialtyType);break;case"subject":b=c("filter")(b,a.facet[d],!0);break;case"sortBy":b=c("orderBy")(b,a.facet[d],a.sortReverse);break;default:var e=a.facet[d].split(" ");for(i=0;i<e.length;i++)b=c("filter")(b,e[i])}return b}a.init(),d.staffdir=a,d.filteredList=g(d.list),e(d.filteredList.length),d.placeholder="https://www.lib.ua.edu/wp-content/themes/roots-ualib/assets/img/user-profile.png",angular.isUndefined(a.facet.sortBy)&&(d.staffdir.facet.sortBy=angular.isDefined(d.sortBy)?d.sortBy:"lastname");var h=d.$on("facetsChange",function(){f()});d.$on("$destroy",function(){h()})}]}}]).directive("staffDirectoryFacets",["StaffDirectoryService",function(a){return{restrict:"AC",scope:{facets:"="},templateUrl:"staff-directory/staff-directory-facets.tpl.html",controller:["$scope",function(b){b.staffdir=a}]}}]).filter("alphaIndex",function(){return function(a,b){return a.map(function(a){return a.alphaIndex=a[b].charAt(0).toUpperCase(),a})}}),angular.module("ualib.staffdir").config(["$routeProvider",function(a){a.when("/staffdir/:email",{template:function(a){return'<div class="staff-faculty-profile" email="'+a.email+'"></div>'}})}]).directive("staffFacultyProfile",["StaffFactory",function(a){return{restrict:"AC",scope:{login:"@email"},templateUrl:"staff-profile/staff-profile.tpl.html",controller:["$scope",function(b){b.userProfile={},a.profile().get({login:b.login}).$promise.then(function(a){for(var c=1;c<4;c++)null!==a.person["social"+c]&&(a.person["snClass"+c]="fa fa-user fa-li",a.person["snTitle"+c]="Social Network",a.person["social"+c].toLowerCase().indexOf("facebook.com")>0&&(a.person["snClass"+c]="fa fa-facebook fa-li",a.person["snTitle"+c]="Facebook"),a.person["social"+c].toLowerCase().indexOf("twitter.com")>0&&(a.person["snClass"+c]="fa fa-twitter fa-li",a.person["snTitle"+c]="Twitter"),a.person["social"+c].toLowerCase().indexOf("linkedin.com")>0&&(a.person["snClass"+c]="fa fa-linkedin fa-li",a.person["snTitle"+c]="LinkedIn"),a.person["social"+c].toLowerCase().indexOf("vk.com")>0&&(a.person["snClass"+c]="fa fa-vk fa-li",a.person["snTitle"+c]="VK"),a.person["social"+c].toLowerCase().indexOf("plus.google.com")>0&&(a.person["snClass"+c]="fa fa-google-plus fa-li",a.person["snTitle"+c]="Google Plus"),a.person["social"+c].toLowerCase().indexOf("instagram.com")>0&&(a.person["snClass"+c]="fa fa-instagram fa-li",a.person["snTitle"+c]="Instagram"),a.person["social"+c].toLowerCase().indexOf("youtube.com")>0&&(a.person["snClass"+c]="fa fa-youtube fa-li",a.person["snTitle"+c]="Youtube"));b.userProfile=a},function(a){console.log("Error: cold not get profile! "+a)})}]}}]);